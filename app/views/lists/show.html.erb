<h1><%= @list.name %></h1>

<h3>Movies in this list</h3>
<div class="row">
  <% @list.bookmarks.each do |bookmark| %>
    <div class="col-md-6 mb-3">
      <div class="card p-2">
        <div class="d-flex">
          <%= image_tag bookmark.movie.poster_url, alt: bookmark.movie.title, width: 100 if bookmark.movie.poster_url.present? %>
          <div class="ps-3">
            <h5><%= bookmark.movie.title %></h5>
            <p><%= truncate(bookmark.movie.overview, length: 120) %></p>
            <p><em><%= bookmark.comment %></em></p>
            <%= link_to "Remove", bookmark_path(bookmark), method: :delete, data: { confirm: "Delete this bookmark?" }, class: "btn btn-sm btn-danger" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<hr>

<h3>Add a movie to this list</h3>
<%= simple_form_for [@list, @bookmark] do |f| %>
  <%= f.input :movie_id, collection: Movie.all, label_method: :title, as: :select, prompt: "Choose a movie" %>
  <%= f.input :comment %>
  <%= f.button :submit, "Add bookmark", class: "btn btn-primary" %>
<% end %>
